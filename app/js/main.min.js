let osName="unknown";const platform=navigator.platform.toLowerCase(),userAgent=navigator.userAgent.toLowerCase();function detectMobile(){const e=navigator.userAgent.toLowerCase(),n=navigator.maxTouchPoints>1,t=/android|iphone|ipod|blackberry|bb10|iemobile|opera mini|webos/.test(e),o=e.includes("macintosh")&&n||e.includes("ipad"),s=e.includes("windows")&&n,d=screen.width<=768||screen.height<=768,i=void 0!==window.orientation;return t||o||s||d||i}platform.includes("win")?osName=userAgent.includes("windows nt 10.0")?"windows 10":userAgent.includes("windows nt 6.3")?"windows 8.1":userAgent.includes("windows nt 6.2")?"windows 8":userAgent.includes("windows nt 6.1")?"windows 7":userAgent.includes("windows nt 6.0")?"windows vista":userAgent.includes("windows nt 5.1")||userAgent.includes("windows xp")?"windows xp":"windows":platform.includes("mac")&&(osName="macos");const isMobile=detectMobile();if(isMobile){const e=document.getElementById("mobile-screen");e&&(e.style.display="block");const n=document.querySelector("section.home");n&&(n.style.display="none");const t=document.querySelector("header");t&&(t.style.display="none")}else{const e=document.getElementById("mobile-screen");e&&(e.style.display="none");const n=document.querySelector("section.home");n&&(n.style.display="");const t=document.querySelector("header");t&&(t.style.display="")}const input=document.getElementById("code"),button=document.getElementById("getClientBtn"),modal=document.getElementById("modalForm"),openModalBtn=document.getElementById("home-btn"),closeModalBtn=document.getElementById("modalCloseBtn");openModalBtn.addEventListener("click",(()=>{modal.classList.add("active")})),closeModalBtn.addEventListener("click",(()=>{modal.classList.remove("active")})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&modal.classList.remove("active")}));let mouseDownInside=!1;function showError(){const e=document.getElementById("modalError");e.style.display="block",input.classList.add("error-input"),button.disabled=!0,setTimeout((()=>{e.style.display="none",input.classList.remove("error-input"),button.disabled=!1}),1500)}modal.addEventListener("mousedown",(e=>{mouseDownInside=!!e.target.closest(".modal__inner")})),modal.addEventListener("mouseup",(e=>{const n=!!e.target.closest(".modal__inner");mouseDownInside||n||modal.classList.remove("active")})),input.addEventListener("input",(function(){this.value=this.value.replace(/[^A-Za-z0-9]/g,""),this.value.length>11&&(this.value=this.value.slice(0,11)),button.disabled=11!==this.value.length})),button.addEventListener("click",(async()=>{const e=input.value,n=osName.includes("mac")?"mac":"windows";document.getElementById("modalError").style.display="none",input.classList.remove("error");try{const t=await fetch("/php/functions/public_validate_code.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`code=${encodeURIComponent(e)}&os=${encodeURIComponent(n)}`}),o=await t.json();"ok"===o.status&&o.download_link?window.location.href=o.download_link:showError()}catch(e){showError()}}));